<!DOCTYPE html><!--<Content />--><html lang="en"><head><meta charset="UTF-8"><meta name="description" content="neewbee's blog"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link href="/output.css" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"><meta name="generator" content="Astro v3.4.0"><title>unset</title><link rel="stylesheet" href="/_astro/about-me.c71ca1a0.css" /></head><!-- ><--><body class="bg-white dark:bg-gray-900"><div class="min-h-screen max-w-5xl mx-auto w-11/12"><div class="max-w-3xl m-auto w-11/12 font-mono dark:text-white text-l text-black flex flex-col items-center"><div class="prose dark:prose-invert prose-slate flex items-center flex-col w-full"><div class="text-2xl m-6 text-clip"></div><div data-rehype-pretty-code-fragment=""><pre class="dracula" style="background-color:#282A36" tabindex="0" data-language="tsx" data-theme="default"><code data-line-numbers="" data-language="tsx" data-theme="default" style="display:grid" data-line-numbers-max-digits="2"><span data-line=""><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { gl, scene, camera } </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> state;</span></span>
<span data-line=""><span style="color:#6272A4">//  render the scene without the *glass*</span></span>
<span data-line=""><span style="color:#F8F8F2">mesh.current.visible </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">false</span><span style="color:#F8F8F2">;</span></span>
<span data-line=""><span style="color:#F8F8F2">gl.</span><span style="color:#50FA7B">setRenderTarget</span><span style="color:#F8F8F2">(mainRenderTarget);</span></span>
<span data-line=""><span style="color:#6272A4">// and save the render data</span></span>
<span data-line=""><span style="color:#F8F8F2">gl.</span><span style="color:#50FA7B">render</span><span style="color:#F8F8F2">(scene, camera);</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6272A4">// pass the image data to *glass* mesh shader and calculate the final color output</span></span>
<span data-line=""><span style="color:#F8F8F2">mesh.current.material.uniforms.uTexture.value </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> mainRenderTarget.texture;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F8F8F2">gl.</span><span style="color:#50FA7B">setRenderTarget</span><span style="color:#F8F8F2">(</span><span style="color:#BD93F9">null</span><span style="color:#F8F8F2">);</span></span>
<span data-line=""><span style="color:#6272A4">// render the *glass*</span></span>
<span data-line=""><span style="color:#F8F8F2">mesh.current.visible </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">;</span></span></code></pre></div></div></div></div></body></html>